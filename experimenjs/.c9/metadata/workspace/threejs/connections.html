{"filter":false,"title":"connections.html","tooltip":"/threejs/connections.html","undoManager":{"stack":[[{"start":{"row":0,"column":0},"end":{"row":250,"column":4},"action":"insert","lines":["\t\t\tvar group;","\t\t\tvar container, stats;","\t\t\tvar particlesData = [];","\t\t\tvar camera, scene, renderer;","\t\t\tvar positions,colors;","\t\t\tvar pointCloud;","\t\t\tvar particlePositions;","\t\t\tvar linesMesh;","","\t\t\tvar maxParticleCount = 1000;","\t\t\tvar particleCount = 500;","\t\t\tvar r = 800;","\t\t\tvar rHalf = r / 2;","","\t\t\tvar effectController = {","\t\t\t\tshowDots: true,","\t\t\t\tshowLines: true,","\t\t\t\tminDistance: 150,","\t\t\t\tlimitConnections: false,","\t\t\t\tmaxConnections: 20,","\t\t\t\tparticleCount: 500","\t\t\t}","","\t\t\tinit();","\t\t\tanimate();","","\t\t\tfunction initGUI() {","","\t\t\t\tvar gui = new dat.GUI();","","\t\t\t\tgui.add( effectController, \"showDots\" ).onChange( function( value ) { pointCloud.visible = value; } );","\t\t\t\tgui.add( effectController, \"showLines\" ).onChange( function( value ) { linesMesh.visible = value; } );","\t\t\t\tgui.add( effectController, \"minDistance\", 10, 300 );","\t\t\t\tgui.add( effectController, \"limitConnections\" );","\t\t\t\tgui.add( effectController, \"maxConnections\", 0, 30, 1 );","\t\t\t\tgui.add( effectController, \"particleCount\", 0, maxParticleCount, 1 ).onChange( function( value ) {","","\t\t\t\t\tparticleCount = parseInt( value );","\t\t\t\t\tparticles.drawcalls[ 0 ].count = particleCount;","","\t\t\t\t});","","\t\t\t}","","\t\t\tfunction init() {","","\t\t\t\tinitGUI();","","\t\t\t\tcontainer = document.getElementById( 'container' );","","\t\t\t\t//","","\t\t\t\tcamera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 4000 );","\t\t\t\tcamera.position.z = 1750;","","\t\t\t\tcontrols = new THREE.OrbitControls( camera, container );","","\t\t\t\tscene = new THREE.Scene();","","\t\t\t\tgeometry = new THREE.BufferGeometry();","\t\t\t\tvar material = new THREE.LineBasicMaterial({ vertexColors: THREE.VertexColors });","","\t\t\t\tvar segments = maxParticleCount * maxParticleCount;","","\t\t\t\tpositions = new Float32Array( segments * 3 );","\t\t\t\tcolors = new Float32Array( segments * 3 );","","\t\t\t\tvar pMaterial = new THREE.PointCloudMaterial({","\t\t\t\t\tcolor: 0xFFFFFF,","\t\t\t\t\tsize: 3,","\t\t\t\t\tblending: THREE.AdditiveBlending,","\t\t\t\t\ttransparent: true,","\t\t\t\t\tsizeAttenuation: false","\t\t\t\t});","","\t\t\t\tparticles = new THREE.BufferGeometry();","\t\t\t\tparticlePositions = new Float32Array( maxParticleCount * 3 );","","\t\t\t\tfor ( var i = 0; i < maxParticleCount; i++ ) {","","\t\t\t\t\tvar x = Math.random() * r - r / 2;","\t\t\t\t\tvar y = Math.random() * r - r / 2;","\t\t\t\t\tvar z = Math.random() * r - r / 2;","","\t\t\t\t\tparticlePositions[ i * 3     ] = x;","\t\t\t\t\tparticlePositions[ i * 3 + 1 ] = y;","\t\t\t\t\tparticlePositions[ i * 3 + 2 ] = z;","","\t\t\t\t\t// add it to the geometry","\t\t\t\t\tparticlesData.push({","\t\t\t\t\t\tvelocity: new THREE.Vector3( -1 + Math.random() * 2, -1 + Math.random() * 2,  -1 + Math.random() * 2 ),","\t\t\t\t\t\tnumConnections: 0","\t\t\t\t\t});","","\t\t\t\t}","","\t\t\t\tparticles.drawcalls.push( {","\t\t\t\t\tstart: 0,","\t\t\t\t\tcount: particleCount,","\t\t\t\t\tindex: 0","\t\t\t\t} );","","\t\t\t\tparticles.addAttribute( 'position', new THREE.BufferAttribute( particlePositions, 3 ) );","","\t\t\t\t// create the particle system","\t\t\t\tpointCloud = new THREE.PointCloud( particles, pMaterial );","","\t\t\t\tgroup = new THREE.Object3D();","","\t\t\t\t// add it to the scene","\t\t\t\tgroup.add( pointCloud );","","\t\t\t\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( positions, 3 ) );","\t\t\t\tgeometry.addAttribute( 'color', new THREE.BufferAttribute( colors, 3 ) );","","\t\t\t\tgeometry.computeBoundingSphere();","","\t\t\t\tgeometry.drawcalls.push( {","\t\t\t\t\tstart: 0,","\t\t\t\t\tcount: 0,","\t\t\t\t\tindex: 0","\t\t\t\t} );","","\t\t\t\tlinesMesh = new THREE.Line( geometry, material, THREE.LinePieces );","\t\t\t\tgroup.add( linesMesh );","","\t\t\t\tscene.add( group );","","\t\t\t\t//","","\t\t\t\trenderer = new THREE.WebGLRenderer( { antialias: true } );","\t\t\t\trenderer.setPixelRatio( window.devicePixelRatio )","\t\t\t\trenderer.setSize( window.innerWidth, window.innerHeight );","","\t\t\t\trenderer.gammaInput = true;","\t\t\t\trenderer.gammaOutput = true;","","\t\t\t\tcontainer.appendChild( renderer.domElement );","","\t\t\t\t//","","\t\t\t\tstats = new Stats();","\t\t\t\tstats.domElement.style.position = 'absolute';","\t\t\t\tstats.domElement.style.top = '0px';","\t\t\t\tcontainer.appendChild( stats.domElement );","","\t\t\t\twindow.addEventListener( 'resize', onWindowResize, false );","","\t\t\t}","","\t\t\tfunction onWindowResize() {","","\t\t\t\tcamera.aspect = window.innerWidth / window.innerHeight;","\t\t\t\tcamera.updateProjectionMatrix();","","\t\t\t\trenderer.setSize( window.innerWidth, window.innerHeight );","","\t\t\t}","","\t\t\tfunction animate() {","","\t\t\t\tvar vertexpos = 0;","\t\t\t\tvar colorpos = 0;","\t\t\t\tvar numConnected = 0;","","\t\t\t\tfor ( var i = 0; i < particleCount; i++ )","\t\t\t\t\tparticlesData[ i ].numConnections = 0;","","\t\t\t\tfor ( var i = 0; i < particleCount; i++ ) {","","\t\t\t\t\t// get the particle","\t\t\t\t\tvar particleData = particlesData[i];","","\t\t\t\t\tparticlePositions[ i * 3     ] += particleData.velocity.x;","\t\t\t\t\tparticlePositions[ i * 3 + 1 ] += particleData.velocity.y;","\t\t\t\t\tparticlePositions[ i * 3 + 2 ] += particleData.velocity.z;","","\t\t\t\t\tif ( particlePositions[ i * 3 + 1 ] < -rHalf || particlePositions[ i * 3 + 1 ] > rHalf )","\t\t\t\t\t\tparticleData.velocity.y = -particleData.velocity.y;","","\t\t\t\t\tif ( particlePositions[ i * 3 ] < -rHalf || particlePositions[ i * 3 ] > rHalf )","\t\t\t\t\t\tparticleData.velocity.x = -particleData.velocity.x;","","\t\t\t\t\tif ( particlePositions[ i * 3 + 2 ] < -rHalf || particlePositions[ i * 3 + 2 ] > rHalf )","\t\t\t\t\t\tparticleData.velocity.z = -particleData.velocity.z;","","\t\t\t\t\tif ( effectController.limitConnections && particleData.numConnections >= effectController.maxConnections )","\t\t\t\t\t\tcontinue;","","\t\t\t\t\t// Check collision","\t\t\t\t\tfor ( var j = i + 1; j < particleCount; j++ ) {","","\t\t\t\t\t\tvar particleDataB = particlesData[ j ];","\t\t\t\t\t\tif ( effectController.limitConnections && particleDataB.numConnections >= effectController.maxConnections )","\t\t\t\t\t\t\tcontinue;","","\t\t\t\t\t\tvar dx = particlePositions[ i * 3     ] - particlePositions[ j * 3     ];","\t\t\t\t\t\tvar dy = particlePositions[ i * 3 + 1 ] - particlePositions[ j * 3 + 1 ];","\t\t\t\t\t\tvar dz = particlePositions[ i * 3 + 2 ] - particlePositions[ j * 3 + 2 ];","\t\t\t\t\t\tvar dist = Math.sqrt( dx * dx + dy * dy + dz * dz );","","\t\t\t\t\t\tif ( dist < effectController.minDistance ) {","","\t\t\t\t\t\t\tparticleData.numConnections++;","\t\t\t\t\t\t\tparticleDataB.numConnections++;","","\t\t\t\t\t\t\tvar alpha = 1.0 - dist / effectController.minDistance + 0.2;","","\t\t\t\t\t\t\tpositions[ vertexpos++ ] = particlePositions[ i * 3     ];","\t\t\t\t\t\t\tpositions[ vertexpos++ ] = particlePositions[ i * 3 + 1 ];","\t\t\t\t\t\t\tpositions[ vertexpos++ ] = particlePositions[ i * 3 + 2 ];","","\t\t\t\t\t\t\tpositions[ vertexpos++ ] = particlePositions[ j * 3     ];","\t\t\t\t\t\t\tpositions[ vertexpos++ ] = particlePositions[ j * 3 + 1 ];","\t\t\t\t\t\t\tpositions[ vertexpos++ ] = particlePositions[ j * 3 + 2 ];","","\t\t\t\t\t\t\tcolors[ colorpos++ ] = alpha;","\t\t\t\t\t\t\tcolors[ colorpos++ ] = alpha;","\t\t\t\t\t\t\tcolors[ colorpos++ ] = alpha;","","\t\t\t\t\t\t\tcolors[ colorpos++ ] = alpha;","\t\t\t\t\t\t\tcolors[ colorpos++ ] = alpha;","\t\t\t\t\t\t\tcolors[ colorpos++ ] = alpha;","","\t\t\t\t\t\t\tnumConnected++;","\t\t\t\t\t\t}","\t\t\t\t\t}","\t\t\t\t}","","","\t\t\t\tlinesMesh.geometry.drawcalls[ 0 ].count = numConnected * 2;","\t\t\t\tlinesMesh.geometry.attributes.position.needsUpdate = true;","\t\t\t\tlinesMesh.geometry.attributes.color.needsUpdate = true;","","\t\t\t\tpointCloud.geometry.attributes.position.needsUpdate = true;","","\t\t\t\trequestAnimationFrame( animate );","","\t\t\t\tstats.update();","\t\t\t\trender();","","\t\t\t}","","\t\t\tfunction render() {","","\t\t\t\tvar time = Date.now() * 0.001;","","\t\t\t\tgroup.rotation.y = time * 0.1;","\t\t\t\trenderer.render( scene, camera );","","\t\t\t}"]}],[{"start":{"row":0,"column":0},"end":{"row":1,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":1,"column":0},"end":{"row":2,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":0,"column":0},"end":{"row":45,"column":7},"action":"insert","lines":["<!DOCTYPE html>","<html>","<head>","    <title>Sandbox</title>    ","    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/three.js/r70/three.js\"></script>","    <script>","    window.onload = function() {","","        var renderer = new THREE.WebGLRenderer();","        renderer.setSize( 800, 600 );","        document.body.appendChild( renderer.domElement );","","        var scene = new THREE.Scene();","","        var camera = new THREE.PerspectiveCamera(","            35,             // Field of view","            800 / 600,      // Aspect ratio","            0.1,            // Near plane","            10000           // Far plane","        );","        camera.position.set( -30, 30, 30 );","        camera.lookAt( scene.position );","        ","        var material = new THREE.LineBasicMaterial({","            color: 0xffffff","        });","        ","        var geometry = new THREE.Geometry();","        geometry.vertices.push(new THREE.Vector3(-10, 0, 0));","        geometry.vertices.push(new THREE.Vector3(0, 10, 0));","        geometry.vertices.push(new THREE.Vector3(10, 0, 0));","        ","        var line = new THREE.Line(geometry, material);","        scene.add(line);","","        var light = new THREE.PointLight( 0xFFFF00 );","        light.position.set( 10, 0, 10 );","        scene.add( light );","","        renderer.render( scene, camera );","","    };","    </script>","</head>","<body></body>","</html>"]}],[{"start":{"row":7,"column":0},"end":{"row":39,"column":41},"action":"remove","lines":["","        var renderer = new THREE.WebGLRenderer();","        renderer.setSize( 800, 600 );","        document.body.appendChild( renderer.domElement );","","        var scene = new THREE.Scene();","","        var camera = new THREE.PerspectiveCamera(","            35,             // Field of view","            800 / 600,      // Aspect ratio","            0.1,            // Near plane","            10000           // Far plane","        );","        camera.position.set( -30, 30, 30 );","        camera.lookAt( scene.position );","        ","        var material = new THREE.LineBasicMaterial({","            color: 0xffffff","        });","        ","        var geometry = new THREE.Geometry();","        geometry.vertices.push(new THREE.Vector3(-10, 0, 0));","        geometry.vertices.push(new THREE.Vector3(0, 10, 0));","        geometry.vertices.push(new THREE.Vector3(10, 0, 0));","        ","        var line = new THREE.Line(geometry, material);","        scene.add(line);","","        var light = new THREE.PointLight( 0xFFFF00 );","        light.position.set( 10, 0, 10 );","        scene.add( light );","","        renderer.render( scene, camera );"]}],[{"start":{"row":7,"column":0},"end":{"row":8,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":6,"column":32},"end":{"row":7,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":12,"column":0},"end":{"row":263,"column":4},"action":"remove","lines":["","\t\t\tvar group;","\t\t\tvar container, stats;","\t\t\tvar particlesData = [];","\t\t\tvar camera, scene, renderer;","\t\t\tvar positions,colors;","\t\t\tvar pointCloud;","\t\t\tvar particlePositions;","\t\t\tvar linesMesh;","","\t\t\tvar maxParticleCount = 1000;","\t\t\tvar particleCount = 500;","\t\t\tvar r = 800;","\t\t\tvar rHalf = r / 2;","","\t\t\tvar effectController = {","\t\t\t\tshowDots: true,","\t\t\t\tshowLines: true,","\t\t\t\tminDistance: 150,","\t\t\t\tlimitConnections: false,","\t\t\t\tmaxConnections: 20,","\t\t\t\tparticleCount: 500","\t\t\t}","","\t\t\tinit();","\t\t\tanimate();","","\t\t\tfunction initGUI() {","","\t\t\t\tvar gui = new dat.GUI();","","\t\t\t\tgui.add( effectController, \"showDots\" ).onChange( function( value ) { pointCloud.visible = value; } );","\t\t\t\tgui.add( effectController, \"showLines\" ).onChange( function( value ) { linesMesh.visible = value; } );","\t\t\t\tgui.add( effectController, \"minDistance\", 10, 300 );","\t\t\t\tgui.add( effectController, \"limitConnections\" );","\t\t\t\tgui.add( effectController, \"maxConnections\", 0, 30, 1 );","\t\t\t\tgui.add( effectController, \"particleCount\", 0, maxParticleCount, 1 ).onChange( function( value ) {","","\t\t\t\t\tparticleCount = parseInt( value );","\t\t\t\t\tparticles.drawcalls[ 0 ].count = particleCount;","","\t\t\t\t});","","\t\t\t}","","\t\t\tfunction init() {","","\t\t\t\tinitGUI();","","\t\t\t\tcontainer = document.getElementById( 'container' );","","\t\t\t\t//","","\t\t\t\tcamera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 4000 );","\t\t\t\tcamera.position.z = 1750;","","\t\t\t\tcontrols = new THREE.OrbitControls( camera, container );","","\t\t\t\tscene = new THREE.Scene();","","\t\t\t\tgeometry = new THREE.BufferGeometry();","\t\t\t\tvar material = new THREE.LineBasicMaterial({ vertexColors: THREE.VertexColors });","","\t\t\t\tvar segments = maxParticleCount * maxParticleCount;","","\t\t\t\tpositions = new Float32Array( segments * 3 );","\t\t\t\tcolors = new Float32Array( segments * 3 );","","\t\t\t\tvar pMaterial = new THREE.PointCloudMaterial({","\t\t\t\t\tcolor: 0xFFFFFF,","\t\t\t\t\tsize: 3,","\t\t\t\t\tblending: THREE.AdditiveBlending,","\t\t\t\t\ttransparent: true,","\t\t\t\t\tsizeAttenuation: false","\t\t\t\t});","","\t\t\t\tparticles = new THREE.BufferGeometry();","\t\t\t\tparticlePositions = new Float32Array( maxParticleCount * 3 );","","\t\t\t\tfor ( var i = 0; i < maxParticleCount; i++ ) {","","\t\t\t\t\tvar x = Math.random() * r - r / 2;","\t\t\t\t\tvar y = Math.random() * r - r / 2;","\t\t\t\t\tvar z = Math.random() * r - r / 2;","","\t\t\t\t\tparticlePositions[ i * 3     ] = x;","\t\t\t\t\tparticlePositions[ i * 3 + 1 ] = y;","\t\t\t\t\tparticlePositions[ i * 3 + 2 ] = z;","","\t\t\t\t\t// add it to the geometry","\t\t\t\t\tparticlesData.push({","\t\t\t\t\t\tvelocity: new THREE.Vector3( -1 + Math.random() * 2, -1 + Math.random() * 2,  -1 + Math.random() * 2 ),","\t\t\t\t\t\tnumConnections: 0","\t\t\t\t\t});","","\t\t\t\t}","","\t\t\t\tparticles.drawcalls.push( {","\t\t\t\t\tstart: 0,","\t\t\t\t\tcount: particleCount,","\t\t\t\t\tindex: 0","\t\t\t\t} );","","\t\t\t\tparticles.addAttribute( 'position', new THREE.BufferAttribute( particlePositions, 3 ) );","","\t\t\t\t// create the particle system","\t\t\t\tpointCloud = new THREE.PointCloud( particles, pMaterial );","","\t\t\t\tgroup = new THREE.Object3D();","","\t\t\t\t// add it to the scene","\t\t\t\tgroup.add( pointCloud );","","\t\t\t\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( positions, 3 ) );","\t\t\t\tgeometry.addAttribute( 'color', new THREE.BufferAttribute( colors, 3 ) );","","\t\t\t\tgeometry.computeBoundingSphere();","","\t\t\t\tgeometry.drawcalls.push( {","\t\t\t\t\tstart: 0,","\t\t\t\t\tcount: 0,","\t\t\t\t\tindex: 0","\t\t\t\t} );","","\t\t\t\tlinesMesh = new THREE.Line( geometry, material, THREE.LinePieces );","\t\t\t\tgroup.add( linesMesh );","","\t\t\t\tscene.add( group );","","\t\t\t\t//","","\t\t\t\trenderer = new THREE.WebGLRenderer( { antialias: true } );","\t\t\t\trenderer.setPixelRatio( window.devicePixelRatio )","\t\t\t\trenderer.setSize( window.innerWidth, window.innerHeight );","","\t\t\t\trenderer.gammaInput = true;","\t\t\t\trenderer.gammaOutput = true;","","\t\t\t\tcontainer.appendChild( renderer.domElement );","","\t\t\t\t//","","\t\t\t\tstats = new Stats();","\t\t\t\tstats.domElement.style.position = 'absolute';","\t\t\t\tstats.domElement.style.top = '0px';","\t\t\t\tcontainer.appendChild( stats.domElement );","","\t\t\t\twindow.addEventListener( 'resize', onWindowResize, false );","","\t\t\t}","","\t\t\tfunction onWindowResize() {","","\t\t\t\tcamera.aspect = window.innerWidth / window.innerHeight;","\t\t\t\tcamera.updateProjectionMatrix();","","\t\t\t\trenderer.setSize( window.innerWidth, window.innerHeight );","","\t\t\t}","","\t\t\tfunction animate() {","","\t\t\t\tvar vertexpos = 0;","\t\t\t\tvar colorpos = 0;","\t\t\t\tvar numConnected = 0;","","\t\t\t\tfor ( var i = 0; i < particleCount; i++ )","\t\t\t\t\tparticlesData[ i ].numConnections = 0;","","\t\t\t\tfor ( var i = 0; i < particleCount; i++ ) {","","\t\t\t\t\t// get the particle","\t\t\t\t\tvar particleData = particlesData[i];","","\t\t\t\t\tparticlePositions[ i * 3     ] += particleData.velocity.x;","\t\t\t\t\tparticlePositions[ i * 3 + 1 ] += particleData.velocity.y;","\t\t\t\t\tparticlePositions[ i * 3 + 2 ] += particleData.velocity.z;","","\t\t\t\t\tif ( particlePositions[ i * 3 + 1 ] < -rHalf || particlePositions[ i * 3 + 1 ] > rHalf )","\t\t\t\t\t\tparticleData.velocity.y = -particleData.velocity.y;","","\t\t\t\t\tif ( particlePositions[ i * 3 ] < -rHalf || particlePositions[ i * 3 ] > rHalf )","\t\t\t\t\t\tparticleData.velocity.x = -particleData.velocity.x;","","\t\t\t\t\tif ( particlePositions[ i * 3 + 2 ] < -rHalf || particlePositions[ i * 3 + 2 ] > rHalf )","\t\t\t\t\t\tparticleData.velocity.z = -particleData.velocity.z;","","\t\t\t\t\tif ( effectController.limitConnections && particleData.numConnections >= effectController.maxConnections )","\t\t\t\t\t\tcontinue;","","\t\t\t\t\t// Check collision","\t\t\t\t\tfor ( var j = i + 1; j < particleCount; j++ ) {","","\t\t\t\t\t\tvar particleDataB = particlesData[ j ];","\t\t\t\t\t\tif ( effectController.limitConnections && particleDataB.numConnections >= effectController.maxConnections )","\t\t\t\t\t\t\tcontinue;","","\t\t\t\t\t\tvar dx = particlePositions[ i * 3     ] - particlePositions[ j * 3     ];","\t\t\t\t\t\tvar dy = particlePositions[ i * 3 + 1 ] - particlePositions[ j * 3 + 1 ];","\t\t\t\t\t\tvar dz = particlePositions[ i * 3 + 2 ] - particlePositions[ j * 3 + 2 ];","\t\t\t\t\t\tvar dist = Math.sqrt( dx * dx + dy * dy + dz * dz );","","\t\t\t\t\t\tif ( dist < effectController.minDistance ) {","","\t\t\t\t\t\t\tparticleData.numConnections++;","\t\t\t\t\t\t\tparticleDataB.numConnections++;","","\t\t\t\t\t\t\tvar alpha = 1.0 - dist / effectController.minDistance + 0.2;","","\t\t\t\t\t\t\tpositions[ vertexpos++ ] = particlePositions[ i * 3     ];","\t\t\t\t\t\t\tpositions[ vertexpos++ ] = particlePositions[ i * 3 + 1 ];","\t\t\t\t\t\t\tpositions[ vertexpos++ ] = particlePositions[ i * 3 + 2 ];","","\t\t\t\t\t\t\tpositions[ vertexpos++ ] = particlePositions[ j * 3     ];","\t\t\t\t\t\t\tpositions[ vertexpos++ ] = particlePositions[ j * 3 + 1 ];","\t\t\t\t\t\t\tpositions[ vertexpos++ ] = particlePositions[ j * 3 + 2 ];","","\t\t\t\t\t\t\tcolors[ colorpos++ ] = alpha;","\t\t\t\t\t\t\tcolors[ colorpos++ ] = alpha;","\t\t\t\t\t\t\tcolors[ colorpos++ ] = alpha;","","\t\t\t\t\t\t\tcolors[ colorpos++ ] = alpha;","\t\t\t\t\t\t\tcolors[ colorpos++ ] = alpha;","\t\t\t\t\t\t\tcolors[ colorpos++ ] = alpha;","","\t\t\t\t\t\t\tnumConnected++;","\t\t\t\t\t\t}","\t\t\t\t\t}","\t\t\t\t}","","","\t\t\t\tlinesMesh.geometry.drawcalls[ 0 ].count = numConnected * 2;","\t\t\t\tlinesMesh.geometry.attributes.position.needsUpdate = true;","\t\t\t\tlinesMesh.geometry.attributes.color.needsUpdate = true;","","\t\t\t\tpointCloud.geometry.attributes.position.needsUpdate = true;","","\t\t\t\trequestAnimationFrame( animate );","","\t\t\t\tstats.update();","\t\t\t\trender();","","\t\t\t}","","\t\t\tfunction render() {","","\t\t\t\tvar time = Date.now() * 0.001;","","\t\t\t\tgroup.rotation.y = time * 0.1;","\t\t\t\trenderer.render( scene, camera );","","\t\t\t}"]}],[{"start":{"row":11,"column":7},"end":{"row":12,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":6,"column":32},"end":{"row":7,"column":0},"action":"insert","lines":["",""]},{"start":{"row":7,"column":0},"end":{"row":7,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":7,"column":8},"end":{"row":258,"column":4},"action":"insert","lines":["","\t\t\tvar group;","\t\t\tvar container, stats;","\t\t\tvar particlesData = [];","\t\t\tvar camera, scene, renderer;","\t\t\tvar positions,colors;","\t\t\tvar pointCloud;","\t\t\tvar particlePositions;","\t\t\tvar linesMesh;","","\t\t\tvar maxParticleCount = 1000;","\t\t\tvar particleCount = 500;","\t\t\tvar r = 800;","\t\t\tvar rHalf = r / 2;","","\t\t\tvar effectController = {","\t\t\t\tshowDots: true,","\t\t\t\tshowLines: true,","\t\t\t\tminDistance: 150,","\t\t\t\tlimitConnections: false,","\t\t\t\tmaxConnections: 20,","\t\t\t\tparticleCount: 500","\t\t\t}","","\t\t\tinit();","\t\t\tanimate();","","\t\t\tfunction initGUI() {","","\t\t\t\tvar gui = new dat.GUI();","","\t\t\t\tgui.add( effectController, \"showDots\" ).onChange( function( value ) { pointCloud.visible = value; } );","\t\t\t\tgui.add( effectController, \"showLines\" ).onChange( function( value ) { linesMesh.visible = value; } );","\t\t\t\tgui.add( effectController, \"minDistance\", 10, 300 );","\t\t\t\tgui.add( effectController, \"limitConnections\" );","\t\t\t\tgui.add( effectController, \"maxConnections\", 0, 30, 1 );","\t\t\t\tgui.add( effectController, \"particleCount\", 0, maxParticleCount, 1 ).onChange( function( value ) {","","\t\t\t\t\tparticleCount = parseInt( value );","\t\t\t\t\tparticles.drawcalls[ 0 ].count = particleCount;","","\t\t\t\t});","","\t\t\t}","","\t\t\tfunction init() {","","\t\t\t\tinitGUI();","","\t\t\t\tcontainer = document.getElementById( 'container' );","","\t\t\t\t//","","\t\t\t\tcamera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 4000 );","\t\t\t\tcamera.position.z = 1750;","","\t\t\t\tcontrols = new THREE.OrbitControls( camera, container );","","\t\t\t\tscene = new THREE.Scene();","","\t\t\t\tgeometry = new THREE.BufferGeometry();","\t\t\t\tvar material = new THREE.LineBasicMaterial({ vertexColors: THREE.VertexColors });","","\t\t\t\tvar segments = maxParticleCount * maxParticleCount;","","\t\t\t\tpositions = new Float32Array( segments * 3 );","\t\t\t\tcolors = new Float32Array( segments * 3 );","","\t\t\t\tvar pMaterial = new THREE.PointCloudMaterial({","\t\t\t\t\tcolor: 0xFFFFFF,","\t\t\t\t\tsize: 3,","\t\t\t\t\tblending: THREE.AdditiveBlending,","\t\t\t\t\ttransparent: true,","\t\t\t\t\tsizeAttenuation: false","\t\t\t\t});","","\t\t\t\tparticles = new THREE.BufferGeometry();","\t\t\t\tparticlePositions = new Float32Array( maxParticleCount * 3 );","","\t\t\t\tfor ( var i = 0; i < maxParticleCount; i++ ) {","","\t\t\t\t\tvar x = Math.random() * r - r / 2;","\t\t\t\t\tvar y = Math.random() * r - r / 2;","\t\t\t\t\tvar z = Math.random() * r - r / 2;","","\t\t\t\t\tparticlePositions[ i * 3     ] = x;","\t\t\t\t\tparticlePositions[ i * 3 + 1 ] = y;","\t\t\t\t\tparticlePositions[ i * 3 + 2 ] = z;","","\t\t\t\t\t// add it to the geometry","\t\t\t\t\tparticlesData.push({","\t\t\t\t\t\tvelocity: new THREE.Vector3( -1 + Math.random() * 2, -1 + Math.random() * 2,  -1 + Math.random() * 2 ),","\t\t\t\t\t\tnumConnections: 0","\t\t\t\t\t});","","\t\t\t\t}","","\t\t\t\tparticles.drawcalls.push( {","\t\t\t\t\tstart: 0,","\t\t\t\t\tcount: particleCount,","\t\t\t\t\tindex: 0","\t\t\t\t} );","","\t\t\t\tparticles.addAttribute( 'position', new THREE.BufferAttribute( particlePositions, 3 ) );","","\t\t\t\t// create the particle system","\t\t\t\tpointCloud = new THREE.PointCloud( particles, pMaterial );","","\t\t\t\tgroup = new THREE.Object3D();","","\t\t\t\t// add it to the scene","\t\t\t\tgroup.add( pointCloud );","","\t\t\t\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( positions, 3 ) );","\t\t\t\tgeometry.addAttribute( 'color', new THREE.BufferAttribute( colors, 3 ) );","","\t\t\t\tgeometry.computeBoundingSphere();","","\t\t\t\tgeometry.drawcalls.push( {","\t\t\t\t\tstart: 0,","\t\t\t\t\tcount: 0,","\t\t\t\t\tindex: 0","\t\t\t\t} );","","\t\t\t\tlinesMesh = new THREE.Line( geometry, material, THREE.LinePieces );","\t\t\t\tgroup.add( linesMesh );","","\t\t\t\tscene.add( group );","","\t\t\t\t//","","\t\t\t\trenderer = new THREE.WebGLRenderer( { antialias: true } );","\t\t\t\trenderer.setPixelRatio( window.devicePixelRatio )","\t\t\t\trenderer.setSize( window.innerWidth, window.innerHeight );","","\t\t\t\trenderer.gammaInput = true;","\t\t\t\trenderer.gammaOutput = true;","","\t\t\t\tcontainer.appendChild( renderer.domElement );","","\t\t\t\t//","","\t\t\t\tstats = new Stats();","\t\t\t\tstats.domElement.style.position = 'absolute';","\t\t\t\tstats.domElement.style.top = '0px';","\t\t\t\tcontainer.appendChild( stats.domElement );","","\t\t\t\twindow.addEventListener( 'resize', onWindowResize, false );","","\t\t\t}","","\t\t\tfunction onWindowResize() {","","\t\t\t\tcamera.aspect = window.innerWidth / window.innerHeight;","\t\t\t\tcamera.updateProjectionMatrix();","","\t\t\t\trenderer.setSize( window.innerWidth, window.innerHeight );","","\t\t\t}","","\t\t\tfunction animate() {","","\t\t\t\tvar vertexpos = 0;","\t\t\t\tvar colorpos = 0;","\t\t\t\tvar numConnected = 0;","","\t\t\t\tfor ( var i = 0; i < particleCount; i++ )","\t\t\t\t\tparticlesData[ i ].numConnections = 0;","","\t\t\t\tfor ( var i = 0; i < particleCount; i++ ) {","","\t\t\t\t\t// get the particle","\t\t\t\t\tvar particleData = particlesData[i];","","\t\t\t\t\tparticlePositions[ i * 3     ] += particleData.velocity.x;","\t\t\t\t\tparticlePositions[ i * 3 + 1 ] += particleData.velocity.y;","\t\t\t\t\tparticlePositions[ i * 3 + 2 ] += particleData.velocity.z;","","\t\t\t\t\tif ( particlePositions[ i * 3 + 1 ] < -rHalf || particlePositions[ i * 3 + 1 ] > rHalf )","\t\t\t\t\t\tparticleData.velocity.y = -particleData.velocity.y;","","\t\t\t\t\tif ( particlePositions[ i * 3 ] < -rHalf || particlePositions[ i * 3 ] > rHalf )","\t\t\t\t\t\tparticleData.velocity.x = -particleData.velocity.x;","","\t\t\t\t\tif ( particlePositions[ i * 3 + 2 ] < -rHalf || particlePositions[ i * 3 + 2 ] > rHalf )","\t\t\t\t\t\tparticleData.velocity.z = -particleData.velocity.z;","","\t\t\t\t\tif ( effectController.limitConnections && particleData.numConnections >= effectController.maxConnections )","\t\t\t\t\t\tcontinue;","","\t\t\t\t\t// Check collision","\t\t\t\t\tfor ( var j = i + 1; j < particleCount; j++ ) {","","\t\t\t\t\t\tvar particleDataB = particlesData[ j ];","\t\t\t\t\t\tif ( effectController.limitConnections && particleDataB.numConnections >= effectController.maxConnections )","\t\t\t\t\t\t\tcontinue;","","\t\t\t\t\t\tvar dx = particlePositions[ i * 3     ] - particlePositions[ j * 3     ];","\t\t\t\t\t\tvar dy = particlePositions[ i * 3 + 1 ] - particlePositions[ j * 3 + 1 ];","\t\t\t\t\t\tvar dz = particlePositions[ i * 3 + 2 ] - particlePositions[ j * 3 + 2 ];","\t\t\t\t\t\tvar dist = Math.sqrt( dx * dx + dy * dy + dz * dz );","","\t\t\t\t\t\tif ( dist < effectController.minDistance ) {","","\t\t\t\t\t\t\tparticleData.numConnections++;","\t\t\t\t\t\t\tparticleDataB.numConnections++;","","\t\t\t\t\t\t\tvar alpha = 1.0 - dist / effectController.minDistance + 0.2;","","\t\t\t\t\t\t\tpositions[ vertexpos++ ] = particlePositions[ i * 3     ];","\t\t\t\t\t\t\tpositions[ vertexpos++ ] = particlePositions[ i * 3 + 1 ];","\t\t\t\t\t\t\tpositions[ vertexpos++ ] = particlePositions[ i * 3 + 2 ];","","\t\t\t\t\t\t\tpositions[ vertexpos++ ] = particlePositions[ j * 3     ];","\t\t\t\t\t\t\tpositions[ vertexpos++ ] = particlePositions[ j * 3 + 1 ];","\t\t\t\t\t\t\tpositions[ vertexpos++ ] = particlePositions[ j * 3 + 2 ];","","\t\t\t\t\t\t\tcolors[ colorpos++ ] = alpha;","\t\t\t\t\t\t\tcolors[ colorpos++ ] = alpha;","\t\t\t\t\t\t\tcolors[ colorpos++ ] = alpha;","","\t\t\t\t\t\t\tcolors[ colorpos++ ] = alpha;","\t\t\t\t\t\t\tcolors[ colorpos++ ] = alpha;","\t\t\t\t\t\t\tcolors[ colorpos++ ] = alpha;","","\t\t\t\t\t\t\tnumConnected++;","\t\t\t\t\t\t}","\t\t\t\t\t}","\t\t\t\t}","","","\t\t\t\tlinesMesh.geometry.drawcalls[ 0 ].count = numConnected * 2;","\t\t\t\tlinesMesh.geometry.attributes.position.needsUpdate = true;","\t\t\t\tlinesMesh.geometry.attributes.color.needsUpdate = true;","","\t\t\t\tpointCloud.geometry.attributes.position.needsUpdate = true;","","\t\t\t\trequestAnimationFrame( animate );","","\t\t\t\tstats.update();","\t\t\t\trender();","","\t\t\t}","","\t\t\tfunction render() {","","\t\t\t\tvar time = Date.now() * 0.001;","","\t\t\t\tgroup.rotation.y = time * 0.1;","\t\t\t\trenderer.render( scene, camera );","","\t\t\t}"]}],[{"start":{"row":7,"column":0},"end":{"row":7,"column":4},"action":"remove","lines":["    "]},{"start":{"row":8,"column":0},"end":{"row":8,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":9,"column":0},"end":{"row":9,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":10,"column":0},"end":{"row":10,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":11,"column":0},"end":{"row":11,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":12,"column":0},"end":{"row":12,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":13,"column":0},"end":{"row":13,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":14,"column":0},"end":{"row":14,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":15,"column":0},"end":{"row":15,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":17,"column":0},"end":{"row":17,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":18,"column":0},"end":{"row":18,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":19,"column":0},"end":{"row":19,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":20,"column":0},"end":{"row":20,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":22,"column":0},"end":{"row":22,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":23,"column":0},"end":{"row":23,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":24,"column":0},"end":{"row":24,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":25,"column":0},"end":{"row":25,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":26,"column":0},"end":{"row":26,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":27,"column":0},"end":{"row":27,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":28,"column":0},"end":{"row":28,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":29,"column":0},"end":{"row":29,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":31,"column":0},"end":{"row":31,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":32,"column":0},"end":{"row":32,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":34,"column":0},"end":{"row":34,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":36,"column":0},"end":{"row":36,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":38,"column":0},"end":{"row":38,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":39,"column":0},"end":{"row":39,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":40,"column":0},"end":{"row":40,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":41,"column":0},"end":{"row":41,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":42,"column":0},"end":{"row":42,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":43,"column":0},"end":{"row":43,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":45,"column":0},"end":{"row":45,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":46,"column":0},"end":{"row":46,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":48,"column":0},"end":{"row":48,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":50,"column":0},"end":{"row":50,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":52,"column":0},"end":{"row":52,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":54,"column":0},"end":{"row":54,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":56,"column":0},"end":{"row":56,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":58,"column":0},"end":{"row":58,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":60,"column":0},"end":{"row":60,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":61,"column":0},"end":{"row":61,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":63,"column":0},"end":{"row":63,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":65,"column":0},"end":{"row":65,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":67,"column":0},"end":{"row":67,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":68,"column":0},"end":{"row":68,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":70,"column":0},"end":{"row":70,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":72,"column":0},"end":{"row":72,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":73,"column":0},"end":{"row":73,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":75,"column":0},"end":{"row":75,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":76,"column":0},"end":{"row":76,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":77,"column":0},"end":{"row":77,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":78,"column":0},"end":{"row":78,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":79,"column":0},"end":{"row":79,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":80,"column":0},"end":{"row":80,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":81,"column":0},"end":{"row":81,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":83,"column":0},"end":{"row":83,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":84,"column":0},"end":{"row":84,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":86,"column":0},"end":{"row":86,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":88,"column":0},"end":{"row":88,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":89,"column":0},"end":{"row":89,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":90,"column":0},"end":{"row":90,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":92,"column":0},"end":{"row":92,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":93,"column":0},"end":{"row":93,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":94,"column":0},"end":{"row":94,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":96,"column":0},"end":{"row":96,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":97,"column":0},"end":{"row":97,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":98,"column":0},"end":{"row":98,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":99,"column":0},"end":{"row":99,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":100,"column":0},"end":{"row":100,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":102,"column":0},"end":{"row":102,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":104,"column":0},"end":{"row":104,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":105,"column":0},"end":{"row":105,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":106,"column":0},"end":{"row":106,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":107,"column":0},"end":{"row":107,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":108,"column":0},"end":{"row":108,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":110,"column":0},"end":{"row":110,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":112,"column":0},"end":{"row":112,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":113,"column":0},"end":{"row":113,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":115,"column":0},"end":{"row":115,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":117,"column":0},"end":{"row":117,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":118,"column":0},"end":{"row":118,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":120,"column":0},"end":{"row":120,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":121,"column":0},"end":{"row":121,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":123,"column":0},"end":{"row":123,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":125,"column":0},"end":{"row":125,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":126,"column":0},"end":{"row":126,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":127,"column":0},"end":{"row":127,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":128,"column":0},"end":{"row":128,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":129,"column":0},"end":{"row":129,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":131,"column":0},"end":{"row":131,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":132,"column":0},"end":{"row":132,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":134,"column":0},"end":{"row":134,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":136,"column":0},"end":{"row":136,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":138,"column":0},"end":{"row":138,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":139,"column":0},"end":{"row":139,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":140,"column":0},"end":{"row":140,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":142,"column":0},"end":{"row":142,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":143,"column":0},"end":{"row":143,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":145,"column":0},"end":{"row":145,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":147,"column":0},"end":{"row":147,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":149,"column":0},"end":{"row":149,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":150,"column":0},"end":{"row":150,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":151,"column":0},"end":{"row":151,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":152,"column":0},"end":{"row":152,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":154,"column":0},"end":{"row":154,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":156,"column":0},"end":{"row":156,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":158,"column":0},"end":{"row":158,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":160,"column":0},"end":{"row":160,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":161,"column":0},"end":{"row":161,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":163,"column":0},"end":{"row":163,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":165,"column":0},"end":{"row":165,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":167,"column":0},"end":{"row":167,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":169,"column":0},"end":{"row":169,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":170,"column":0},"end":{"row":170,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":171,"column":0},"end":{"row":171,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":173,"column":0},"end":{"row":173,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":174,"column":0},"end":{"row":174,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":176,"column":0},"end":{"row":176,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":178,"column":0},"end":{"row":178,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":179,"column":0},"end":{"row":179,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":181,"column":0},"end":{"row":181,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":182,"column":0},"end":{"row":182,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":183,"column":0},"end":{"row":183,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":185,"column":0},"end":{"row":185,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":186,"column":0},"end":{"row":186,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":188,"column":0},"end":{"row":188,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":189,"column":0},"end":{"row":189,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":191,"column":0},"end":{"row":191,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":192,"column":0},"end":{"row":192,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":194,"column":0},"end":{"row":194,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":195,"column":0},"end":{"row":195,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":197,"column":0},"end":{"row":197,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":198,"column":0},"end":{"row":198,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":200,"column":0},"end":{"row":200,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":201,"column":0},"end":{"row":201,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":202,"column":0},"end":{"row":202,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":204,"column":0},"end":{"row":204,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":205,"column":0},"end":{"row":205,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":206,"column":0},"end":{"row":206,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":207,"column":0},"end":{"row":207,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":209,"column":0},"end":{"row":209,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":211,"column":0},"end":{"row":211,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":212,"column":0},"end":{"row":212,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":214,"column":0},"end":{"row":214,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":216,"column":0},"end":{"row":216,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":217,"column":0},"end":{"row":217,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":218,"column":0},"end":{"row":218,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":220,"column":0},"end":{"row":220,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":221,"column":0},"end":{"row":221,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":222,"column":0},"end":{"row":222,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":224,"column":0},"end":{"row":224,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":225,"column":0},"end":{"row":225,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":226,"column":0},"end":{"row":226,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":228,"column":0},"end":{"row":228,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":229,"column":0},"end":{"row":229,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":230,"column":0},"end":{"row":230,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":232,"column":0},"end":{"row":232,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":233,"column":0},"end":{"row":233,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":234,"column":0},"end":{"row":234,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":235,"column":0},"end":{"row":235,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":238,"column":0},"end":{"row":238,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":239,"column":0},"end":{"row":239,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":240,"column":0},"end":{"row":240,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":242,"column":0},"end":{"row":242,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":244,"column":0},"end":{"row":244,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":246,"column":0},"end":{"row":246,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":247,"column":0},"end":{"row":247,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":249,"column":0},"end":{"row":249,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":251,"column":0},"end":{"row":251,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":253,"column":0},"end":{"row":253,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":255,"column":0},"end":{"row":255,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":256,"column":0},"end":{"row":256,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":258,"column":0},"end":{"row":258,"column":1},"action":"remove","lines":["\t"]}],[{"start":{"row":4,"column":88},"end":{"row":5,"column":0},"action":"insert","lines":["",""]},{"start":{"row":5,"column":0},"end":{"row":5,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":5,"column":4},"end":{"row":5,"column":5},"action":"insert","lines":["<"]}],[{"start":{"row":5,"column":5},"end":{"row":5,"column":6},"action":"insert","lines":["s"]}],[{"start":{"row":5,"column":6},"end":{"row":5,"column":7},"action":"insert","lines":["c"]}],[{"start":{"row":5,"column":5},"end":{"row":5,"column":7},"action":"remove","lines":["sc"]},{"start":{"row":5,"column":5},"end":{"row":5,"column":51},"action":"insert","lines":["script type=\"text/javascript\" src=\"\"></script>"]}],[{"start":{"row":5,"column":40},"end":{"row":5,"column":90},"action":"insert","lines":["http://threejs.org/examples/js/libs/dat.gui.min.js"]}],[{"start":{"row":5,"column":101},"end":{"row":6,"column":0},"action":"insert","lines":["",""]},{"start":{"row":6,"column":0},"end":{"row":6,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":6,"column":4},"end":{"row":6,"column":5},"action":"insert","lines":["<"]}],[{"start":{"row":6,"column":5},"end":{"row":6,"column":6},"action":"insert","lines":["s"]}],[{"start":{"row":6,"column":6},"end":{"row":6,"column":7},"action":"insert","lines":["c"]}],[{"start":{"row":6,"column":7},"end":{"row":6,"column":8},"action":"insert","lines":["r"]}],[{"start":{"row":6,"column":5},"end":{"row":6,"column":8},"action":"remove","lines":["scr"]},{"start":{"row":6,"column":5},"end":{"row":6,"column":51},"action":"insert","lines":["script type=\"text/javascript\" src=\"\"></script>"]}],[{"start":{"row":6,"column":40},"end":{"row":6,"column":96},"action":"insert","lines":["http://threejs.org/examples/js/controls/OrbitControls.js"]}],[{"start":{"row":6,"column":107},"end":{"row":7,"column":0},"action":"insert","lines":["",""]},{"start":{"row":7,"column":0},"end":{"row":7,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":7,"column":4},"end":{"row":7,"column":5},"action":"insert","lines":["<"]}],[{"start":{"row":7,"column":5},"end":{"row":7,"column":6},"action":"insert","lines":["s"]}],[{"start":{"row":7,"column":6},"end":{"row":7,"column":7},"action":"insert","lines":["c"]}],[{"start":{"row":7,"column":5},"end":{"row":7,"column":7},"action":"remove","lines":["sc"]},{"start":{"row":7,"column":5},"end":{"row":7,"column":51},"action":"insert","lines":["script type=\"text/javascript\" src=\"\"></script>"]}],[{"start":{"row":7,"column":40},"end":{"row":7,"column":88},"action":"insert","lines":["http://threejs.org/examples/js/libs/stats.min.js"]}],[{"start":{"row":265,"column":6},"end":{"row":267,"column":0},"action":"insert","lines":["","    ",""]}],[{"start":{"row":266,"column":4},"end":{"row":266,"column":5},"action":"insert","lines":[","]}],[{"start":{"row":266,"column":4},"end":{"row":266,"column":5},"action":"remove","lines":[","]}],[{"start":{"row":266,"column":4},"end":{"row":266,"column":5},"action":"insert","lines":[","]}],[{"start":{"row":266,"column":4},"end":{"row":266,"column":5},"action":"remove","lines":[","]}],[{"start":{"row":266,"column":4},"end":{"row":266,"column":5},"action":"insert","lines":["<"]}],[{"start":{"row":266,"column":5},"end":{"row":266,"column":6},"action":"insert","lines":["d"]}],[{"start":{"row":266,"column":6},"end":{"row":266,"column":7},"action":"insert","lines":["i"]}],[{"start":{"row":266,"column":7},"end":{"row":266,"column":8},"action":"insert","lines":["v"]}],[{"start":{"row":266,"column":5},"end":{"row":266,"column":8},"action":"remove","lines":["div"]},{"start":{"row":266,"column":5},"end":{"row":266,"column":15},"action":"insert","lines":["div></div>"]}],[{"start":{"row":266,"column":8},"end":{"row":266,"column":9},"action":"insert","lines":[" "]}],[{"start":{"row":266,"column":9},"end":{"row":266,"column":10},"action":"insert","lines":["i"]}],[{"start":{"row":266,"column":10},"end":{"row":266,"column":11},"action":"insert","lines":["d"]}],[{"start":{"row":266,"column":11},"end":{"row":266,"column":12},"action":"insert","lines":["="]}],[{"start":{"row":266,"column":12},"end":{"row":266,"column":14},"action":"insert","lines":["\"\""]}],[{"start":{"row":266,"column":13},"end":{"row":266,"column":14},"action":"insert","lines":["c"]}],[{"start":{"row":266,"column":14},"end":{"row":266,"column":15},"action":"insert","lines":["o"]}],[{"start":{"row":266,"column":15},"end":{"row":266,"column":16},"action":"insert","lines":["n"]}],[{"start":{"row":266,"column":16},"end":{"row":266,"column":17},"action":"insert","lines":["t"]}],[{"start":{"row":266,"column":17},"end":{"row":266,"column":18},"action":"insert","lines":["a"]}],[{"start":{"row":266,"column":18},"end":{"row":266,"column":19},"action":"insert","lines":["i"]}],[{"start":{"row":266,"column":19},"end":{"row":266,"column":20},"action":"insert","lines":["n"]}],[{"start":{"row":266,"column":20},"end":{"row":266,"column":21},"action":"insert","lines":["e"]}],[{"start":{"row":266,"column":21},"end":{"row":266,"column":22},"action":"insert","lines":["r"]}],[{"start":{"row":268,"column":7},"end":{"row":268,"column":8},"action":"insert","lines":[" "]}],[{"start":{"row":81,"column":22},"end":{"row":81,"column":23},"action":"insert","lines":["/"]}],[{"start":{"row":81,"column":23},"end":{"row":81,"column":24},"action":"insert","lines":["/"]}],[{"start":{"row":81,"column":23},"end":{"row":81,"column":24},"action":"remove","lines":["/"]}],[{"start":{"row":81,"column":22},"end":{"row":81,"column":23},"action":"remove","lines":["/"]}],[{"start":{"row":81,"column":4},"end":{"row":81,"column":5},"action":"insert","lines":["/"]}],[{"start":{"row":81,"column":5},"end":{"row":81,"column":6},"action":"insert","lines":["/"]}],[{"start":{"row":82,"column":4},"end":{"row":82,"column":5},"action":"insert","lines":["/"]}],[{"start":{"row":82,"column":5},"end":{"row":82,"column":6},"action":"insert","lines":["/"]}],[{"start":{"row":82,"column":5},"end":{"row":82,"column":6},"action":"remove","lines":["/"]}],[{"start":{"row":82,"column":4},"end":{"row":82,"column":5},"action":"remove","lines":["/"]}],[{"start":{"row":81,"column":5},"end":{"row":81,"column":6},"action":"remove","lines":["/"]}],[{"start":{"row":81,"column":4},"end":{"row":81,"column":5},"action":"remove","lines":["/"]}],[{"start":{"row":5,"column":44},"end":{"row":5,"column":45},"action":"remove","lines":[":"],"id":1}],[{"start":{"row":5,"column":43},"end":{"row":5,"column":44},"action":"remove","lines":["p"],"id":2}],[{"start":{"row":5,"column":42},"end":{"row":5,"column":43},"action":"remove","lines":["t"],"id":3}],[{"start":{"row":5,"column":41},"end":{"row":5,"column":42},"action":"remove","lines":["t"],"id":4}],[{"start":{"row":5,"column":40},"end":{"row":5,"column":41},"action":"remove","lines":["h"],"id":5}],[{"start":{"row":6,"column":44},"end":{"row":6,"column":45},"action":"remove","lines":[":"],"id":6}],[{"start":{"row":6,"column":43},"end":{"row":6,"column":44},"action":"remove","lines":["p"],"id":7}],[{"start":{"row":6,"column":42},"end":{"row":6,"column":43},"action":"remove","lines":["t"],"id":8}],[{"start":{"row":6,"column":41},"end":{"row":6,"column":42},"action":"remove","lines":["t"],"id":9}],[{"start":{"row":6,"column":40},"end":{"row":6,"column":41},"action":"remove","lines":["h"],"id":10}],[{"start":{"row":7,"column":44},"end":{"row":7,"column":45},"action":"remove","lines":[":"],"id":11}],[{"start":{"row":7,"column":43},"end":{"row":7,"column":44},"action":"remove","lines":["p"],"id":12}],[{"start":{"row":7,"column":42},"end":{"row":7,"column":43},"action":"remove","lines":["t"],"id":13}],[{"start":{"row":7,"column":41},"end":{"row":7,"column":42},"action":"remove","lines":["t"],"id":14}],[{"start":{"row":7,"column":40},"end":{"row":7,"column":41},"action":"remove","lines":["h"],"id":15}],[{"start":{"row":8,"column":12},"end":{"row":9,"column":0},"action":"insert","lines":["",""],"id":18},{"start":{"row":9,"column":0},"end":{"row":9,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":8,"column":12},"end":{"row":9,"column":0},"action":"remove","lines":["",""],"id":17}],[{"start":{"row":9,"column":0},"end":{"row":262,"column":6},"action":"remove","lines":["    window.onload = function() {","    ","\t\tvar group;","\t\tvar container, stats;","\t\tvar particlesData = [];","\t\tvar camera, scene, renderer;","\t\tvar positions,colors;","\t\tvar pointCloud;","\t\tvar particlePositions;","\t\tvar linesMesh;","","\t\tvar maxParticleCount = 1000;","\t\tvar particleCount = 500;","\t\tvar r = 800;","\t\tvar rHalf = r / 2;","","\t\tvar effectController = {","\t\t\tshowDots: true,","\t\t\tshowLines: true,","\t\t\tminDistance: 150,","\t\t\tlimitConnections: false,","\t\t\tmaxConnections: 20,","\t\t\tparticleCount: 500","\t\t}","","\t\tinit();","\t\tanimate();","","\t\tfunction initGUI() {","","\t\t\tvar gui = new dat.GUI();","","\t\t\tgui.add( effectController, \"showDots\" ).onChange( function( value ) { pointCloud.visible = value; } );","\t\t\tgui.add( effectController, \"showLines\" ).onChange( function( value ) { linesMesh.visible = value; } );","\t\t\tgui.add( effectController, \"minDistance\", 10, 300 );","\t\t\tgui.add( effectController, \"limitConnections\" );","\t\t\tgui.add( effectController, \"maxConnections\", 0, 30, 1 );","\t\t\tgui.add( effectController, \"particleCount\", 0, maxParticleCount, 1 ).onChange( function( value ) {","","\t\t\t\tparticleCount = parseInt( value );","\t\t\t\tparticles.drawcalls[ 0 ].count = particleCount;","","\t\t\t});","","\t\t}","","\t\tfunction init() {","","\t\t\tinitGUI();","","\t\t\tcontainer = document.getElementById( 'container' );","","\t\t\t//","","\t\t\tcamera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 4000 );","\t\t\tcamera.position.z = 1750;","","\t\t\tcontrols = new THREE.OrbitControls( camera, container );","","\t\t\tscene = new THREE.Scene();","","\t\t\tgeometry = new THREE.BufferGeometry();","\t\t\tvar material = new THREE.LineBasicMaterial({ vertexColors: THREE.VertexColors });","","\t\t\tvar segments = maxParticleCount * maxParticleCount;","","\t\t\tpositions = new Float32Array( segments * 3 );","\t\t\tcolors = new Float32Array( segments * 3 );","","\t\t\tvar pMaterial = new THREE.PointCloudMaterial({","\t\t\t\tcolor: 0xFFFFFF,","\t\t\t\tsize: 3,","\t\t\t\tblending: THREE.AdditiveBlending,","\t\t\t\ttransparent: true,","\t\t\t\tsizeAttenuation: false","\t\t\t});","","\t\t\tparticles = new THREE.BufferGeometry();","\t\t\tparticlePositions = new Float32Array( maxParticleCount * 3 );","","\t\t\tfor ( var i = 0; i < maxParticleCount; i++ ) {","","\t\t\t\tvar x = Math.random() * r - r / 2;","\t\t\t\tvar y = Math.random() * r - r / 2;","\t\t\t\tvar z = Math.random() * r - r / 2;","","\t\t\t\tparticlePositions[ i * 3     ] = x;","\t\t\t\tparticlePositions[ i * 3 + 1 ] = y;","\t\t\t\tparticlePositions[ i * 3 + 2 ] = z;","","\t\t\t\t// add it to the geometry","\t\t\t\tparticlesData.push({","\t\t\t\t\tvelocity: new THREE.Vector3( -1 + Math.random() * 2, -1 + Math.random() * 2,  -1 + Math.random() * 2 ),","\t\t\t\t\tnumConnections: 0","\t\t\t\t});","","\t\t\t}","","\t\t\tparticles.drawcalls.push( {","\t\t\t\tstart: 0,","\t\t\t\tcount: particleCount,","\t\t\t\tindex: 0","\t\t\t} );","","\t\t\tparticles.addAttribute( 'position', new THREE.BufferAttribute( particlePositions, 3 ) );","","\t\t\t// create the particle system","\t\t\tpointCloud = new THREE.PointCloud( particles, pMaterial );","","\t\t\tgroup = new THREE.Object3D();","","\t\t\t// add it to the scene","\t\t\tgroup.add( pointCloud );","","\t\t\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( positions, 3 ) );","\t\t\tgeometry.addAttribute( 'color', new THREE.BufferAttribute( colors, 3 ) );","","\t\t\tgeometry.computeBoundingSphere();","","\t\t\tgeometry.drawcalls.push( {","\t\t\t\tstart: 0,","\t\t\t\tcount: 0,","\t\t\t\tindex: 0","\t\t\t} );","","\t\t\tlinesMesh = new THREE.Line( geometry, material, THREE.LinePieces );","\t\t\tgroup.add( linesMesh );","","\t\t\tscene.add( group );","","\t\t\t//","","\t\t\trenderer = new THREE.WebGLRenderer( { antialias: true } );","\t\t\trenderer.setPixelRatio( window.devicePixelRatio )","\t\t\trenderer.setSize( window.innerWidth, window.innerHeight );","","\t\t\trenderer.gammaInput = true;","\t\t\trenderer.gammaOutput = true;","","\t\t\tcontainer.appendChild( renderer.domElement );","","\t\t\t//","","\t\t\tstats = new Stats();","\t\t\tstats.domElement.style.position = 'absolute';","\t\t\tstats.domElement.style.top = '0px';","\t\t\tcontainer.appendChild( stats.domElement );","","\t\t\twindow.addEventListener( 'resize', onWindowResize, false );","","\t\t}","","\t\tfunction onWindowResize() {","","\t\t\tcamera.aspect = window.innerWidth / window.innerHeight;","\t\t\tcamera.updateProjectionMatrix();","","\t\t\trenderer.setSize( window.innerWidth, window.innerHeight );","","\t\t}","","\t\tfunction animate() {","","\t\t\tvar vertexpos = 0;","\t\t\tvar colorpos = 0;","\t\t\tvar numConnected = 0;","","\t\t\tfor ( var i = 0; i < particleCount; i++ )","\t\t\t\tparticlesData[ i ].numConnections = 0;","","\t\t\tfor ( var i = 0; i < particleCount; i++ ) {","","\t\t\t\t// get the particle","\t\t\t\tvar particleData = particlesData[i];","","\t\t\t\tparticlePositions[ i * 3     ] += particleData.velocity.x;","\t\t\t\tparticlePositions[ i * 3 + 1 ] += particleData.velocity.y;","\t\t\t\tparticlePositions[ i * 3 + 2 ] += particleData.velocity.z;","","\t\t\t\tif ( particlePositions[ i * 3 + 1 ] < -rHalf || particlePositions[ i * 3 + 1 ] > rHalf )","\t\t\t\t\tparticleData.velocity.y = -particleData.velocity.y;","","\t\t\t\tif ( particlePositions[ i * 3 ] < -rHalf || particlePositions[ i * 3 ] > rHalf )","\t\t\t\t\tparticleData.velocity.x = -particleData.velocity.x;","","\t\t\t\tif ( particlePositions[ i * 3 + 2 ] < -rHalf || particlePositions[ i * 3 + 2 ] > rHalf )","\t\t\t\t\tparticleData.velocity.z = -particleData.velocity.z;","","\t\t\t\tif ( effectController.limitConnections && particleData.numConnections >= effectController.maxConnections )","\t\t\t\t\tcontinue;","","\t\t\t\t// Check collision","\t\t\t\tfor ( var j = i + 1; j < particleCount; j++ ) {","","\t\t\t\t\tvar particleDataB = particlesData[ j ];","\t\t\t\t\tif ( effectController.limitConnections && particleDataB.numConnections >= effectController.maxConnections )","\t\t\t\t\t\tcontinue;","","\t\t\t\t\tvar dx = particlePositions[ i * 3     ] - particlePositions[ j * 3     ];","\t\t\t\t\tvar dy = particlePositions[ i * 3 + 1 ] - particlePositions[ j * 3 + 1 ];","\t\t\t\t\tvar dz = particlePositions[ i * 3 + 2 ] - particlePositions[ j * 3 + 2 ];","\t\t\t\t\tvar dist = Math.sqrt( dx * dx + dy * dy + dz * dz );","","\t\t\t\t\tif ( dist < effectController.minDistance ) {","","\t\t\t\t\t\tparticleData.numConnections++;","\t\t\t\t\t\tparticleDataB.numConnections++;","","\t\t\t\t\t\tvar alpha = 1.0 - dist / effectController.minDistance + 0.2;","","\t\t\t\t\t\tpositions[ vertexpos++ ] = particlePositions[ i * 3     ];","\t\t\t\t\t\tpositions[ vertexpos++ ] = particlePositions[ i * 3 + 1 ];","\t\t\t\t\t\tpositions[ vertexpos++ ] = particlePositions[ i * 3 + 2 ];","","\t\t\t\t\t\tpositions[ vertexpos++ ] = particlePositions[ j * 3     ];","\t\t\t\t\t\tpositions[ vertexpos++ ] = particlePositions[ j * 3 + 1 ];","\t\t\t\t\t\tpositions[ vertexpos++ ] = particlePositions[ j * 3 + 2 ];","","\t\t\t\t\t\tcolors[ colorpos++ ] = alpha;","\t\t\t\t\t\tcolors[ colorpos++ ] = alpha;","\t\t\t\t\t\tcolors[ colorpos++ ] = alpha;","","\t\t\t\t\t\tcolors[ colorpos++ ] = alpha;","\t\t\t\t\t\tcolors[ colorpos++ ] = alpha;","\t\t\t\t\t\tcolors[ colorpos++ ] = alpha;","","\t\t\t\t\t\tnumConnected++;","\t\t\t\t\t}","\t\t\t\t}","\t\t\t}","","","\t\t\tlinesMesh.geometry.drawcalls[ 0 ].count = numConnected * 2;","\t\t\tlinesMesh.geometry.attributes.position.needsUpdate = true;","\t\t\tlinesMesh.geometry.attributes.color.needsUpdate = true;","","\t\t\tpointCloud.geometry.attributes.position.needsUpdate = true;","","\t\t\trequestAnimationFrame( animate );","","\t\t\tstats.update();","\t\t\trender();","","\t\t}","","\t\tfunction render() {","","\t\t\tvar time = Date.now() * 0.001;","","\t\t\tgroup.rotation.y = time * 0.1;","\t\t\trenderer.render( scene, camera );","","\t\t}","    };"],"id":16}]],"mark":82,"position":82},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":7,"column":40},"end":{"row":7,"column":40},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1431454260976,"hash":"d27573567f0b81c0cc35c1ef2251281730f63826"}