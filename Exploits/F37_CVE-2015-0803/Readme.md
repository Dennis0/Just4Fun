# Mozilla Firefox 37 CVE-2015-0803 and CVE-2015-0804

## Bug Report
* <https://www.mozilla.org/en-US/security/advisories/mfsa2015-39/>

## Code of Interest
Author: Robert Longson <longsonr@gmail.com>  2015-03-10 10:23:14
Committer: Robert Longson <longsonr@gmail.com>  2015-03-10 10:23:14
Parent: 76dd8edccb3757d755884ee27b14579a3c051f0a (Bug 1134280 - Get rid of Tag() - patch 2.8 - dom/html - Fix all the occurrences, m=smaug, r=surkov)
Child:  dc24477d79c62fe99c947174d075f07309733aa6 (Bug 1117172 part 3.  Change the wrappercached WrapObject methods to allow passing in aGivenProto.  r=peterv)
Branches: master, remotes/origin/aurora, remotes/origin/b2g-inbound, remotes/origin/fx-team, remotes/origin/inbound, remotes/origin/master
Follows: 
Precedes: 

    Bug 1134561 - Use of the namespace when checking the tag name if HTMLPictureElement and HTMLSourceElement. r=jst

------------------------ dom/html/HTMLSourceElement.cpp ------------------------
```cpp
index d3e3c52..17dfd14 100644
@@ -80,7 +80,7 @@ HTMLSourceElement::AfterSetAttr(int32_t aNameSpaceID, nsIAtom* aName,
 {
   // If we are associated with a <picture> with a valid <img>, notify it of
   // responsive parameter changes
-  nsINode *parent = nsINode::GetParentNode();
+  Element *parent = nsINode::GetParentElement();
   if (aNameSpaceID == kNameSpaceID_None &&
       (aName == nsGkAtoms::srcset ||
        aName == nsGkAtoms::sizes ||
@@ -89,7 +89,7 @@ HTMLSourceElement::AfterSetAttr(int32_t aNameSpaceID, nsIAtom* aName,
       parent && parent->IsHTMLElement(nsGkAtoms::picture)) {
     nsString strVal = aValue ? aValue->GetStringValue() : EmptyString();
     // Find all img siblings after this <source> and notify them of the change
-    nsCOMPtr<nsINode> sibling = AsContent();
+    nsCOMPtr<nsIContent> sibling = AsContent();
     while ( (sibling = sibling->GetNextSibling()) ) {
       if (sibling->IsHTMLElement(nsGkAtoms::img)) {
         HTMLImageElement *img = static_cast<HTMLImageElement*>(sibling.get());
@@ -149,7 +149,7 @@ HTMLSourceElement::BindToTree(nsIDocument *aDocument,
     media->NotifyAddedSource();
   } else if (aParent && aParent->IsHTMLElement(nsGkAtoms::picture)) {
     // Find any img siblings after this <source> and notify them
-    nsCOMPtr<nsINode> sibling = AsContent();
+    nsCOMPtr<nsIContent> sibling = AsContent();
     while ( (sibling = sibling->GetNextSibling()) ) {
       if (sibling->IsHTMLElement(nsGkAtoms::img)) {
         HTMLImageElement *img = static_cast<HTMLImageElement*>(sibling.get());
```
